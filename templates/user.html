<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Write Post</title>

    <link href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css" rel="stylesheet" >
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
    <link href="/static/pure.css" rel="stylesheet" >
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <style>
      .l-box {
        padding: 0.5em;
      }
      .poster {
      word-break: break-all;
      word-wrap: break-word;
      }
      .pure-img-responsive {
      max-width: 100%;
      height: 300px;
      }
      .padded {
      padding: 50px;
      }
    </style>
</head>

<body>
    <div class="home-menu pure-menu pure-menu-horizontal">
        <a href="{{url_for('showposts')}}" class="pure-menu-heading">cowsource</a>
        <ul class="pure-menu-list">
            <li class="pure-menu-item"><a href="{{url_for('home')}}" class="pure-menu-link">Home</a></li>
            <li class="pure-menu-item"><a href="{{url_for('about')}}" class="pure-menu-link">About</a></li>
            <li class="pure-menu-item"><a href="{{url_for('makepost')}}" class="pure-menu-link">Make Post</a></li>
            <li class="pure-menu-item"><a href="{{url_for('showposts')}}" class="pure-menu-link">Find New</a></li>
	    <form class="pure-form pure-menu-item">
              <fieldset>
                <input type="text" name="query" placeholder="Search by name or tags">
                <button name="search" type="submit" class="pure-button pure-button-primary">Search</button>
              </fieldset>
            </form>
        </ul>
    </div>
	<h1>{{username['error']}}</h1>
	{% if 'error' not in username %}
    <div class="pure-g">
      <div class="pure-u-0 pure-u-lg-1-4"></div>
      <div class="pure-u-1 pure-u-lg-1-2">
	<p><h1>{{username['name']}}'s profile</h1></p>
      </div>
      <div class="pure-u-0 pure-u-lg-1-4"></div>
    </div>
    <div class="pure-g">
    <div class="pure-u-0 pure-u-lg-1-4"></div>
    <div class="pure-u-1 pure-u-lg-1-2"><p>View {{username['name']}}'s posts</p></div>
    <div class="pure-u-0 pure-u-lg-1-4"></div>
    </div>
        {% if posts|length == 0 %}
      <div class="pure-g">
      <div class="pure-u-1-2" align="center">
        <p>No Results</p>
      </div>
      </div>
    {% else %}
      <div class="l-content">
      {% for row_no in range(posts|length % 4 + 1) %}
        <div class="pricing-tables pure-g">
          {% for post_no in range(4) %}
            {% if (row_no * 4 + post_no) < posts|length %}
              <div class="pure-u-1-4">
              <div class="pricing-table pricing-table-free">
                <tr>
                  <td>  
                    <a href="{{url_for('showpost',idp=posts[row_no * 4 + post_no]['_id'])}}">
                    <img class="pure-img-responsive" src="{{posts[row_no * 4 + post_no]['file']}}">
                    </a>
                  </td>
                </tr>
                <tr>
                  <td class="padded">
                    <b>{{posts[row_no * 4 + post_no]['name']}}</b> <i>from</i> 
                    <b>{{posts[row_no * 4 + post_no]['restaurant']}}</b>
                  </td>
                </tr>
              </div>
          </div>
          {% endif %}
        {% endfor %}
        </div>
      {% endfor %}
      </div>
    {% endif %}
    <script>
      $SCRIPT_ROOT = {{request.script_root|tojson|safe}};
	  
	  function like(uid,pid){
	  $.getJSON($SCRIPT_ROOT + "/like", {idu: uid, idp: pid },
	  function(likes)
	  {$("#likes"+pid).text(likes.likes + ' likes'); console.log(likes);}
	  )
	  
      }
    </script>
    {% endif %}
</body>
</html>
